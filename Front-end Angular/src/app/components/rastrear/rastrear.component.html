<app-header></app-header>

<div class="flex justify-center items-start min-h-screen bg-gradient-to-b from-teal-50 to-gray-100 p-8">
  <div class="mt-8 w-full">
    <div class="p-12 rounded-xl shadow-xl w-full max-w-4xl mx-auto bg-white relative">
      <h1 class="text-4xl text-teal-800 font-extrabold mb-6 text-center uppercase tracking-wider">
        ğŸŒ Rastrear tu EnvÃ­o
      </h1>

      <div class="mb-8">
        <app-mapa 
          [origin]="origin" 
          [destination]="destination" 
          [currentLocation]="currentLocation">
        </app-mapa>
      </div>

      <div class="flex flex-col gap-8">
        <!-- Formulario de ingreso de datos -->
        <div *ngIf="!showTrackingInfo">
          <form (ngSubmit)="onSubmit()" #trackingForm="ngForm" class="bg-gradient-to-r from-teal-100 via-white to-teal-100 p-8 rounded-2xl shadow-lg">
            <h2 class="text-2xl text-teal-700 font-semibold mb-4 text-center">ğŸ” Ingresa tus Datos</h2>

            <div class="mb-6">
              <label for="orderCode" class="block text-lg font-medium text-teal-800 mb-2">
                CÃ³digo de Pedido
              </label>
              <input 
                type="text" 
                id="orderCode" 
                [(ngModel)]="trackingDetails.orderCode" 
                name="orderCode" 
                required
                #orderCode="ngModel"
                [ngClass]="{'border-red-500': orderCode.invalid && orderCode.touched}" 
                class="w-full px-4 py-3 border rounded-lg shadow-sm transition focus:outline-none focus:ring-2 focus:ring-teal-300" 
                placeholder="Introduce tu cÃ³digo"
              >
              <div *ngIf="orderCode.invalid && orderCode.touched" class="text-red-600 text-sm mt-1">
                CÃ³digo requerido.
              </div>
            </div>

            <div class="mb-6">
              <label for="password" class="block text-lg font-medium text-teal-800 mb-2">
                Clave
              </label>
              <input 
                type="password" 
                id="password" 
                [(ngModel)]="trackingDetails.password" 
                name="password" 
                required
                #password="ngModel"
                [ngClass]="{'border-red-500': password.invalid && password.touched}" 
                class="w-full px-4 py-3 border rounded-lg shadow-sm transition focus:outline-none focus:ring-2 focus:ring-teal-300" 
                placeholder="Introduce tu clave"
              >
              <div *ngIf="password.invalid && password.touched" class="text-red-600 text-sm mt-1">
                Clave requerida.
              </div>
            </div>

            <button type="submit" [disabled]="!trackingForm.form.valid" class="w-full bg-teal-700 text-white font-semibold py-3 rounded-lg shadow-lg transition-transform transform hover:scale-105 hover:bg-teal-800">
              Rastrear ğŸš€
            </button>
          </form>
        </div>

        <!-- Detalles del envÃ­o -->
        <div *ngIf="showTrackingInfo">
          <div class="bg-gradient-to-b from-yellow-50 to-white p-8 rounded-2xl shadow-lg">
            <h2 class="text-2xl text-teal-800 font-semibold mb-6 text-center">ğŸ“¦ Detalles del EnvÃ­o</h2>

            <div class="grid grid-cols-2 gap-6 mb-6">
              <div class="p-4 rounded-lg shadow-md bg-yellow-200">
                <span class="block font-medium text-teal-800">Fecha de Registro:</span>
                <strong class="block text-teal-900">{{ informacionEnvio.fechaRegistro }}</strong>
              </div>
              <div class="p-4 rounded-lg shadow-md bg-yellow-200">
                <span class="block font-medium text-teal-800">Fecha de Entrega:</span>
                <strong class="block text-teal-900">{{ informacionEnvio.fechaEntrega }}</strong>
              </div>
              <div class="p-4 rounded-lg shadow-md bg-yellow-200">
                <span class="block font-medium text-teal-800">Origen:</span>
                <strong class="block text-teal-900">{{ informacionEnvio.origen }}</strong>
              </div>
              <div class="p-4 rounded-lg shadow-md bg-yellow-200">
                <span class="block font-medium text-teal-800">Destino:</span>
                <strong class="block text-teal-900">{{ informacionEnvio.destino }}</strong>
              </div>
            </div>

            <!-- Estado del envÃ­o -->
            <div class="flex justify-evenly items-center mb-6">
              <div class="text-center">
                <div class="text-4xl">ğŸ“¦</div>
                <span class="text-teal-800 font-medium">Registrado</span>
              </div>
              <div class="text-center">
                <div class="text-4xl">ğŸšš</div>
                <span class="text-teal-800 font-medium">En Ruta</span>
              </div>
              <div class="text-center">
                <div class="text-4xl">âœ…</div>
                <span class="text-teal-800 font-medium">Entregado</span>
              </div>
            </div>

            <div class="flex justify-between mt-6">
              <button (click)="irAInicio()" class="bg-teal-700 text-white font-semibold py-2 px-6 rounded-lg shadow-md hover:bg-teal-800">
                Inicio
              </button>
              <button (click)="resetTracking()" class="bg-yellow-500 text-white font-semibold py-2 px-6 rounded-lg shadow-md hover:bg-yellow-600">
                Rastrear de Nuevo
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
