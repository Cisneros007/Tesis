<app-header></app-header>

<div class="header-spacing"></div>

<div class="user-profile">
  <!-- User Header Section -->
  <div class="user-header">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT6rKwDbEN_M9FCcve-ozbDkUUn6VkEZ7xfVw&s" alt="User" class="user-image">
    <div class="user-info">
      <h3>Información del Usuario</h3>
      <p><strong>Nombre:</strong> {{ usuario.nombre }}</p>
      <p><strong>Email:</strong> {{ usuario.email }}</p>
      <p><strong>Teléfono:</strong> {{ usuario.telefono }}</p>
      <div class="user-actions">
        <button (click)="abrirModalEditarUsuario()">Editar Usuario</button>
        <button (click)="abrirModalEliminarUsuario()">Eliminar Usuario</button>
        <button class="logout-button" (click)="logOut()">Cerrar sesión</button>
      </div>
    </div>
  </div>

  <!-- Shipments Table Section -->
  <h2>Historial de Envíos</h2>
  <table class="historial-table">
    <thead>
      <tr>
        <th>Nombre del Envío</th>
        <th>Fecha de Envío</th>
        <th>Hora de Envío</th>
        <th>Estado</th>
        <th>Detalles</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let envio of historialEnvios">
        <td>{{ envio.nombreEnvio }}</td>
        <td>{{ envio.fechaEnvio }}</td>
        <td>{{ envio.horaEnvio }}</td>
        <td>{{ envio.estado }}</td>
        <td>
          <button (click)="verDetallesEnvio(envio)">Ver Detalles</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Shipment Details Section -->
  <div *ngIf="envioSeleccionado" class="detalle-envio">
    <h3>Detalles de {{ envioSeleccionado.nombreEnvio }}</h3>
    <p><strong>Fecha:</strong> {{ envioSeleccionado.fechaEnvio }}</p>
    <p><strong>Hora:</strong> {{ envioSeleccionado.horaEnvio }}</p>
    <p><strong>Estado:</strong> {{ envioSeleccionado.estado }}</p>
    <p><strong>Descripción:</strong> {{ envioSeleccionado.descripcion }}</p>
    <button (click)="cerrarDetalles()">Cerrar</button>
  </div>

  <!-- Edit User Modal -->
  <div class="modal" *ngIf="mostrarModalEditarUsuario" aria-modal="true" role="dialog">
    <div class="modal-content">
      <h2>Editar Usuario</h2>
      <div class="form-group">
        <label>Nombre:</label>
        <input type="text"  required>
      </div>
      <div class="form-group">
        <label>Email:</label>
        <input type="email" required>
      </div>
      <div class="form-group">
        <label>Teléfono:</label>
        <input type="tel"  required>
      </div>
      <div class="modal-actions">
        <button (click)="guardarEditarUsuario()" 
                [disabled]="!usuarioEditando?.nombre || !usuarioEditando?.email || !usuarioEditando?.telefono">Guardar</button>
        <button (click)="mostrarModalEditarUsuario = false">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- Delete User Modal -->
  <div class="modal" *ngIf="mostrarModalEliminarUsuario" aria-modal="true" role="dialog">
    <div class="modal-content">
      <h2>Eliminar Usuario</h2>
      <p>¿Está seguro de que desea eliminar su perfil? Esta acción no se puede deshacer.</p>
      <div class="modal-actions">
        <button (click)="confirmarEliminarUsuario()" class="delete-button">Eliminar</button>
        <button (click)="mostrarModalEliminarUsuario = false">Cancelar</button>
      </div>
    </div>
  </div>
</div>
